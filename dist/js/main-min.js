"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.search={query:t.querySelector("form input[type=text]"),button:t.querySelector("form input[type=submit]")},this.resultsSection=t.querySelector("section.search-results"),this.cardsHolder=document.createElement("div"),this.search.button.addEventListener("click",function(e){e.preventDefault(),n.fireSearch()})}return _createClass(e,[{key:"getHints",value:function(){console.log("geting hints")}},{key:"fireSearch",value:function(){var e=this,t=new XMLHttpRequest,n="s=".concat(this.search.query.value);t.addEventListener("load",function(t){var n=t.currentTarget.response,a=e.handleResults(n),i=document.createElement("div");i.className="cards-holder",e.resultsSection.innerHTML="",a.length?a.forEach(function(t){var n=document.createElement("span");n.className="col-4",n.appendChild(t),i.appendChild(n),e.resultsSection.appendChild(i)}):e.resultsSection.innerHTML="<h2>Oops, an error occurred!</h2><p>".concat(a.error,"</p><h2>Please try again!</h2>")});var a=document.createElement("img");a.src="./dist/imgs/91.gif",this.resultsSection.appendChild(a),t.open("GET","".concat("https://www.omdbapi.com/","?").concat(n,"&").concat("apikey=31edb057","&").concat("r=json","&").concat("page=1")),t.send()}},{key:"handleResults",value:function(e){var n=JSON.parse(e),a=[];return"True"!=n.Response||n.Error?{error:n.Error}:(n.Search.forEach(function(e){var n=new t(e);a.push(n.render())}),a)}}]),e}(),t=function(){function e(t){_classCallCheck(this,e),this.id=t.imdbID,this.title=t.Title,this.year=t.Year,this.type=t.Type,this.poster="N/A"!=t.Poster&&t.Poster||"./dist/imgs/placeholder-movieimage.png",this.elements=this.createElements()}return _createClass(e,[{key:"createElements",value:function(){var e=this,t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("img"),i=document.createElement("div"),c=document.createElement("div"),s=document.createElement("h3"),r=document.createElement("p"),l=document.createElement("a");return t.className="card",n.className="card-image bg-cover",i.className="card-descriptions",c.className="card-footer",n.style.backgroundImage="url(".concat(this.poster,")"),a.src=this.poster,a.alt="".concat(this.title," Movie Poster"),n.appendChild(a),s.innerText="".concat(this.title),r.innerHTML="\n        <b>Year:</b> ".concat(this.year," <br/>\n        <b>Type:</b> ").concat(this.type,"\n      "),i.appendChild(s),i.appendChild(r),l.innerText="See Details",l.href="#",l.dataset.imdbid=this.id,l.className="btn btn-red btn-details",l.addEventListener("click",function(t){t.preventDefault(),e.goToDetails()}),c.appendChild(l),t.appendChild(n),t.appendChild(i),t.appendChild(c),t}},{key:"goToDetails",value:function(){var e=new XMLHttpRequest,t="i=".concat(this.id);e.addEventListener("load",function(e){var t=e.currentTarget.response,a=new n(JSON.parse(t));document.querySelector("section.search-results").innerHTML=a.buildDetailsView().outerHTML}),e.open("GET","".concat("https://www.omdbapi.com/","?").concat(t,"&").concat("apikey=31edb057","&").concat("plot=full","&").concat("r=json")),e.send()}},{key:"render",value:function(){return this.elements}}]),e}(),n=function(){function e(t){_classCallCheck(this,e),this.details=t}return _createClass(e,[{key:"buildDetailsView",value:function(){var e=document.createElement("div");e.className="details";var t=document.createElement("section"),n=document.createElement("div"),a=document.createElement("img"),i=document.createElement("div"),c=document.createElement("h2"),s=document.createElement("ul"),r=document.createElement("li"),l=document.createElement("li"),o=document.createElement("li"),d=document.createElement("li"),u=document.createElement("li"),p=document.createElement("li"),m="N/A"!=this.details.Poster&&this.details.Poster||"./dist/imgs/placeholder-movieimage.png";t.className="details-firstSection",n.classList="bg-cover details-poster",i.classList="details-smDescription",n.style.backgroundImage="url(".concat(m,")"),a.src=m,a.alt="".concat(this.details.Title," Movie Poster"),c.innerText="".concat(this.details.Title," (").concat(this.details.Year,")"),r.innerHTML="<span class='list-label'>Director:</span> ".concat(this.details.Director),l.innerHTML="<span class='list-label'>Actors:</span> ".concat(this.details.Actors),o.innerHTML="<span class='list-label'>Production:</span> ".concat(this.details.Production),d.innerHTML="<span class='list-label'>Box Office:</span> ".concat(this.details.BoxOffice),u.innerHTML="<span class='list-label'>Released:</span> ".concat(this.details.Released),p.innerHTML="<span class='list-label'>IMDb Votes:</span> ".concat(this.details.imdbVotes),n.appendChild(a),s.appendChild(r),s.appendChild(l),s.appendChild(o),s.appendChild(d),s.appendChild(u),s.appendChild(p),i.appendChild(c),i.appendChild(s),t.appendChild(n),t.appendChild(i);var h=document.createElement("section"),f=document.createElement("div");f.innerHTML="<h3>Plot: </h3><p>".concat(this.details.Plot,"</p>"),h.className="details-seccondSection",h.appendChild(f);var v=document.createElement("section");v.innerHTML="<h3>Ratings: </h3",v.className="details-thirdSection";return this.details.Ratings.forEach(function(e){var t=document.createElement("div"),n=document.createElement("img"),a=document.createElement("h4"),i=document.createElement("p");t.className="rating-card col-3",a.innerText=e.Source,i.innerHTML=e.Value,n.src=("Internet Movie Database"==e.Source?"dist/imgs/imdb.png":"Rotten Tomatoes"==e.Source&&"dist/imgs/rotten-tomatoes.png")||"Metacritic"==e.Source&&"dist/imgs/metacritic.png",n.alt="".concat(e.Source," ilustrative png image"),t.appendChild(n),t.appendChild(a),t.appendChild(i),v.appendChild(t)}),e.appendChild(t),e.appendChild(h),e.appendChild(v),e}}]),e}();document.querySelectorAll("section.search").forEach(function(t){var n=new e(t);n.search.query.value="batman",n.fireSearch()})}();
//# sourceMappingURL=maps/main-min.js.map
