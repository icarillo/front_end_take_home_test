{"version":3,"sources":["main.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","SearchSection","el","_this","this","search","query","querySelector","button","resultsSection","cardsHolder","document","createElement","addEventListener","e","preventDefault","fireSearch","value","console","log","_this2","oReq","XMLHttpRequest","concat","results","currentTarget","response","cards","handleResults","className","innerHTML","forEach","card","cardCol","appendChild","error","loader","src","open","send","apiResp","JSON","parse","arrCards","Response","Error","Search","data","Card","push","render","id","imdbID","title","Title","year","Year","type","Type","poster","Poster","elements","createElements","_this3","imgHolder","img","cardBody","cardFooter","heading","btn","style","backgroundImage","alt","innerText","href","dataset","imdbid","goToDetails","result","movieDetails","MovieDetails","buildDetailsView","outerHTML","details","detailsLayout","firstSection","posterHolder","posterImg","smDescript","smDetailsList","director","actors","production","boxOfice","released","votes","posterURL","classList","Director","Actors","Production","BoxOffice","Released","imdbVotes","seccondSection","plot","Plot","thirdSection","Ratings","div","source","rate","Source","Value","querySelectorAll","searchSection"],"mappings":"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","sourcesContent":["(() => {\n  class SearchSection {\n    constructor(el){\n      // set properties\n      this.search = {\n        query: el.querySelector('form input[type=text]'),\n        button: el.querySelector('form input[type=submit]')\n      };\n      this.resultsSection = el.querySelector('section.search-results');\n      this.cardsHolder = document.createElement('div');\n\n      // bind events\n      this.search.button.addEventListener('click', e => {\n        e.preventDefault();\n        this.fireSearch();\n      });\n    }\n\n    getHints() {\n      console.log('geting hints');\n    }\n\n    fireSearch() {\n      const oReq = new XMLHttpRequest;\n      const url = \"http://www.omdbapi.com/\";\n      const search = `s=${this.search.query.value}`;\n      const key = `apikey=31edb057`;\n      const response = `r=json`;\n      const page = `page=1`;\n      \n      oReq.addEventListener(\"load\", e => {\n        const results = e.currentTarget.response;\n        const cards = this.handleResults(results);\n        const cardsHolder = document.createElement('div');\n        cardsHolder.className = 'cards-holder';\n        \n        this.resultsSection.innerHTML = '';\n        if(!!cards.length){\n          cards.forEach(card => {\n            const cardCol = document.createElement('span');\n            \n            cardCol.className = 'col-4';\n\n            cardCol.appendChild(card);\n            cardsHolder.appendChild(cardCol);\n            this.resultsSection.appendChild(cardsHolder);\n          });\n        } else {\n            this.resultsSection.innerHTML = `<h2>Oops, an error occurred!</h2><p>${cards.error}</p><h2>Please try again!</h2>`;\n        }\n      });\n      const loader = document.createElement('img');\n      loader.src = './dist/imgs/91.gif';\n      this.resultsSection.appendChild(loader)\n      oReq.open(\"GET\", `${url}?${search}&${key}&${response}&${page}`);\n      oReq.send();\n    }\n\n    handleResults(results) {\n      const apiResp = JSON.parse(results);\n      const arrCards = [];\n      if(apiResp.Response == 'True' && !apiResp.Error){\n        apiResp.Search.forEach( data => {\n          const card = new Card(data);\n          arrCards.push(card.render());\n        });\n        return arrCards;\n      }\n      else {\n        return {error: apiResp.Error};\n      }\n    }\n\n\n  }\n  \n  class Card {\n    constructor(props){\n      this.id = props.imdbID;\n      this.title = props.Title;\n      this.year = props.Year;\n      this.type = props.Type;\n      this.poster = (props.Poster != \"N/A\" && props.Poster) || './dist/imgs/placeholder-movieimage.png';\n      this.elements = this.createElements();\n    }\n\n    createElements(){\n      const card = document.createElement('div');\n      const imgHolder = document.createElement('div');\n      const img = document.createElement('img');\n      const cardBody = document.createElement('div');\n      const cardFooter = document.createElement('div');\n      const heading = document.createElement('h3');\n      const type = document.createElement('p');\n      const btn = document.createElement('a');\n\n      card.className = \"card\";\n      imgHolder.className = \"card-image bg-cover\";\n      cardBody.className = \"card-descriptions\";\n      cardFooter.className = \"card-footer\";\n\n      imgHolder.style.backgroundImage = `url(${this.poster})`;\n      img.src = this.poster;\n      img.alt = `${this.title} Movie Poster`;\n      imgHolder.appendChild(img);\n      heading.innerText = `${this.title}`;\n      type.innerHTML = `\n        <b>Year:</b> ${this.year} <br/>\n        <b>Type:</b> ${this.type}\n      `;\n      cardBody.appendChild(heading);\n      cardBody.appendChild(type);\n      btn.innerText = 'See Details';\n      btn.href = '#';\n      btn.dataset.imdbid = this.id;\n      btn.className = 'btn btn-red btn-details';\n      btn.addEventListener('click', e => {\n        e.preventDefault();\n        this.goToDetails();\n      });\n      cardFooter.appendChild(btn);\n      card.appendChild(imgHolder);\n      card.appendChild(cardBody);\n      card.appendChild(cardFooter);\n\n      return card;\n    }\n\n    goToDetails(){\n      const oReq = new XMLHttpRequest;\n      const url = \"http://www.omdbapi.com/\";\n      const search = `i=${this.id}`;\n      const key = `apikey=31edb057`;\n      const plot = `plot=full`;\n      const response = 'r=json';\n      \n      oReq.addEventListener(\"load\", e => {\n        const result = e.currentTarget.response;\n        const movieDetails = new MovieDetails(JSON.parse(result));\n        const searchResults = document.querySelector('section.search-results');\n\n        searchResults.innerHTML = movieDetails.buildDetailsView().outerHTML;\n      });\n      oReq.open(\"GET\", `${url}?${search}&${key}&${plot}&${response}`);\n      oReq.send();\n    }\n\n    render(){\n      return this.elements;\n    }\n  }\n\n  class MovieDetails {\n    constructor(props) {\n      this.details = props;\n    }\n\n    buildDetailsView() {\n      // Master parent holder\n      const detailsLayout = document.createElement('div');\n      detailsLayout.className = 'details';\n\n      // Top section for poster and small descriptions\n      const firstSection = document.createElement('section');\n      const posterHolder = document.createElement('div');\n      const posterImg = document.createElement('img');\n      const smDescript = document.createElement('div');\n      const heading = document.createElement('h2');\n      const smDetailsList = document.createElement('ul');\n      const director = document.createElement('li');\n      const actors = document.createElement('li');\n      const production = document.createElement('li');\n      const boxOfice = document.createElement('li');\n      const released = document.createElement('li');\n      const votes = document.createElement('li');\n      const posterURL = (this.details.Poster != \"N/A\" && this.details.Poster) || './dist/imgs/placeholder-movieimage.png';\n\n      firstSection.className = 'details-firstSection';\n      posterHolder.classList = 'bg-cover details-poster';\n      smDescript.classList = 'details-smDescription';\n\n      posterHolder.style.backgroundImage = `url(${posterURL})`;\n      posterImg.src = posterURL;\n      posterImg.alt = `${this.details.Title} Movie Poster`;\n      heading.innerText = `${this.details.Title} (${this.details.Year})`;\n      director.innerHTML = `<span class='list-label'>Director:</span> ${this.details.Director}`;\n      actors.innerHTML = `<span class='list-label'>Actors:</span> ${this.details.Actors}`;\n      production.innerHTML = `<span class='list-label'>Production:</span> ${this.details.Production}`;\n      boxOfice.innerHTML = `<span class='list-label'>Box Office:</span> ${this.details.BoxOffice}`;\n      released.innerHTML = `<span class='list-label'>Released:</span> ${this.details.Released}`;\n      votes.innerHTML = `<span class='list-label'>IMDb Votes:</span> ${this.details.imdbVotes}`;\n\n      posterHolder.appendChild(posterImg);\n      smDetailsList.appendChild(director);\n      smDetailsList.appendChild(actors);\n      smDetailsList.appendChild(production);\n      smDetailsList.appendChild(boxOfice);\n      smDetailsList.appendChild(released);\n      smDetailsList.appendChild(votes);\n      smDescript.appendChild(heading);\n      smDescript.appendChild(smDetailsList);\n      firstSection.appendChild(posterHolder);     \n      firstSection.appendChild(smDescript);     \n      \n      // Second section, more details and plot\n      const seccondSection = document.createElement('section');\n      const plot = document.createElement('div');\n\n      plot.innerHTML = `<h3>Plot: </h3><p>${this.details.Plot}</p>`;\n\n      seccondSection.className = 'details-seccondSection';\n\n      seccondSection.appendChild(plot);\n\n      // Second section, more details and plot\n      const thirdSection = document.createElement('section');\n\n      thirdSection.innerHTML = \"<h3>Ratings: </h3\";\n      thirdSection.className = 'details-thirdSection';\n      \n      let ratings = [];\n      this.details.Ratings.forEach( el => {\n        const div = document.createElement('div');\n        const img = document.createElement('img');\n        const source = document.createElement('h4');\n        const rate = document.createElement('p');\n\n        div.className = 'rating-card col-3';\n        source.innerText = el.Source;\n        rate.innerHTML = el.Value;\n        img.src = \n          el.Source == 'Internet Movie Database' && 'dist/imgs/imdb.png'\n          || el.Source == 'Rotten Tomatoes' && 'dist/imgs/rotten-tomatoes.png'\n          || el.Source == 'Metacritic' && 'dist/imgs/metacritic.png'\n        ;\n        img.alt = `${el.Source} ilustrative png image`;\n\n        div.appendChild(img); \n        div.appendChild(source); \n        div.appendChild(rate); \n\n        thirdSection.appendChild(div);\n      });\n\n\n      detailsLayout.appendChild(firstSection)\n      detailsLayout.appendChild(seccondSection);\n      detailsLayout.appendChild(thirdSection);\n\n      return detailsLayout;\n    }\n    \n  }\n  \n  const arrSearchSections = document.querySelectorAll('section.search');\n  arrSearchSections.forEach( el => {\n    const searchSection = new SearchSection(el);\n    searchSection.search.query.value = \"batman\";\n    searchSection.fireSearch();\n  });\n})()\n"],"file":"../main-min.js"}